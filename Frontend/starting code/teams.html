<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IPL Teams</title>

    <!-- Inter Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="teams.css" />
  </head>

  <body>
    <!-- ===== NAVBAR ===== -->
    <nav class="navbar">
      <div class="nav-left">
        <div class="nav-logo">üèÜ</div>
        <div class="nav-title">
          <h1>IPL 2024</h1>
          <p>Cricket Analytics</p>
        </div>
      </div>

      <div class="nav-links">
        <a href="/"> <span class="icon">üìà</span> Overview </a>
        <a class="active" href="#"> <span class="icon">üë•</span> Teams </a>
        <a href="/"> <span class="icon">üèè</span> Players </a>
        <a href="/"> <span class="icon">üìä</span> Leaderboards </a>
        <a href="/"> <span class="icon">‚≠ê</span> All Star Team </a>
      </div>
    </nav>

    <div class="container">
      <h2 class="section-title">IPL Teams</h2>

      <div class="teams-grid">
        <!-- CSK -->

        <div class="team-card" onclick="loadTeamDetails(1)">
          <div class="left">
            <div class="team-icon csk">CSK</div>
            <div>
              <h3 class="team-name">Chennai Super Kings</h3>
              <p class="team-short">CSK</p>
            </div>
          </div>

          <div class="right">
            <p><span class="win">9W</span> <span class="loss">5L</span></p>
            <p class="points">Pts: <strong>18</strong></p>
          </div>

          <div class="team-actions">
            <a href="update-team.html" class="action-btn update">‚úèÔ∏è</a>
            <a href="delete-team.html" class="action-btn delete">üóëÔ∏è</a>
          </div>
        </div>

        <!-- MI -->
        <div class="team-card">
          <div class="left">
            <div class="team-icon mi">MI</div>
            <div>
              <h3 class="team-name">Mumbai Indians</h3>
              <p class="team-short">MI</p>
            </div>
          </div>

          <div class="right">
            <p><span class="win">4W</span> <span class="loss">10L</span></p>
            <p class="points">Pts: <strong>8</strong></p>
          </div>

          <div class="team-actions">
            <a href="update-team.html" class="action-btn update">‚úèÔ∏è</a>
            <a href="delete-team.html" class="action-btn delete">üóëÔ∏è</a>
          </div>
        </div>

        <!-- RCB -->
        <div class="team-card">
          <div class="left">
            <div class="team-icon rcb">RCB</div>
            <div>
              <h3 class="team-name">Royal Challengers Bengaluru</h3>
              <p class="team-short">RCB</p>
            </div>
          </div>

          <div class="right">
            <p><span class="win">7W</span> <span class="loss">7L</span></p>
            <p class="points">Pts: <strong>14</strong></p>
          </div>
        </div>

        <!-- KKR -->
        <div class="team-card">
          <div class="left">
            <div class="team-icon kkr">KKR</div>
            <div>
              <h3 class="team-name">Kolkata Knight Riders</h3>
              <p class="team-short">KKR</p>
            </div>
          </div>

          <div class="right">
            <p><span class="win">11W</span> <span class="loss">3L</span></p>
            <p class="points">Pts: <strong>22</strong></p>
          </div>
        </div>

        <!-- DC -->
        <div class="team-card">
          <div class="left">
            <div class="team-icon dc">DC</div>
            <div>
              <h3 class="team-name">Delhi Capitals</h3>
              <p class="team-short">DC</p>
            </div>
          </div>

          <div class="right">
            <p><span class="win">5W</span> <span class="loss">9L</span></p>
            <p class="points">Pts: <strong>10</strong></p>
          </div>
        </div>

        <!-- PBKS -->
        <div class="team-card">
          <div class="left">
            <div class="team-icon pbks">PBKS</div>
            <div>
              <h3 class="team-name">Punjab Kings</h3>
              <p class="team-short">PBKS</p>
            </div>
          </div>

          <div class="right">
            <p><span class="win">5W</span> <span class="loss">9L</span></p>
            <p class="points">Pts: <strong>10</strong></p>
          </div>
        </div>

        <!-- RR -->
        <div class="team-card">
          <div class="left">
            <div class="team-icon rr">RR</div>
            <div>
              <h3 class="team-name">Rajasthan Royals</h3>
              <p class="team-short">RR</p>
            </div>
          </div>

          <div class="right">
            <p><span class="win">10W</span> <span class="loss">4L</span></p>
            <p class="points">Pts: <strong>20</strong></p>
          </div>
        </div>

        <!-- SRH -->
        <div class="team-card">
          <div class="left">
            <div class="team-icon srh">SRH</div>
            <div>
              <h3 class="team-name">Sunrisers Hyderabad</h3>
              <p class="team-short">SRH</p>
            </div>
          </div>

          <div class="right">
            <p><span class="win">8W</span> <span class="loss">6L</span></p>
            <p class="points">Pts: <strong>16</strong></p>
          </div>
        </div>
      </div>
    </div>
    <!-- TEAM DETAILS SECTION (Hidden initially) -->
    <div class="team-table-container">
      <h2 class="team-title">Chennai Super Kings Roster</h2>

      <table class="team-table">
        <thead>
          <tr>
            <th>Player</th>
            <th>Role</th>
            <th>M</th>
            <th>Runs</th>
            <th>Wkts</th>
            <th>SR</th>
            <th>Econ</th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>Ruturaj Gaikwad</td>
            <td><span class="tag batter">Batter</span></td>
            <td>14</td>
            <td>583</td>
            <td>0</td>
            <td>141.2</td>
            <td>-</td>
          </tr>

          <tr>
            <td>Devon Conway</td>
            <td><span class="tag batter">Batter</span></td>
            <td>12</td>
            <td>438</td>
            <td>0</td>
            <td>135.8</td>
            <td>-</td>
          </tr>

          <tr>
            <td>Shivam Dube</td>
            <td><span class="tag allrounder">All-rounder</span></td>
            <td>14</td>
            <td>396</td>
            <td>3</td>
            <td>158.4</td>
            <td>9.2</td>
          </tr>

          <tr>
            <td>Ravindra Jadeja</td>
            <td><span class="tag allrounder">All-rounder</span></td>
            <td>14</td>
            <td>189</td>
            <td>10</td>
            <td>141</td>
            <td>7.8</td>
          </tr>

          <tr>
            <td>MS Dhoni</td>
            <td><span class="tag keeper">Wicket-keeper</span></td>
            <td>14</td>
            <td>161</td>
            <td>0</td>
            <td>220.5</td>
            <td>-</td>
          </tr>
        </tbody>
      </table>
    </div>

    <script>
      async function loadTeamDetails(teamId) {
        const container = document.getElementById('team-details')

        container.style.display = 'none' // hide before update

        const res = await fetch(`http://localhost:3000/teams/${teamId}`)
        const data = await res.json()

        const team = data.data.team[0]
        const players = data.data.players
        const coaches = data.data.coaches

        // Header update
        document.getElementById('team-header').innerHTML = `
        <h2>${team.TeamName}</h2>
        <p><b>Matches Won:</b> ${team.MatchesWon} | 
           <b>Lost:</b> ${team.MatchesLost} |
           <b>Champions:</b> ${team.Champions} |
           <b>NRR:</b> ${team.NRR}</p>
    `

        // Players table update
        const playersBody = document.querySelector('#players-table tbody')
        playersBody.innerHTML = ''

        players.forEach((p) => {
          playersBody.innerHTML += `
            <tr>
                <td data-label="Name">${p.PName}</td>
                <td data-label="Role">${p.Role}</td>
                <td data-label="Runs">${p.RunsScored}</td>
                <td data-label="Wickets">${p.WicketsTaken}</td>
                <td data-label="Highest">${p.HighestScore}</td>
                <td data-label="Best">${p.BestBowlingFigure}</td>
            </tr>
        `
        })

        // Coaches table update
        const coachesBody = document.querySelector('#coaches-table tbody')
        coachesBody.innerHTML = ''

        coaches.forEach((c) => {
          coachesBody.innerHTML += `
            <tr>
                <td data-label="Coach">${c.CoachName}</td>
                <td data-label="Role">${c.Role}</td>
                <td data-label="Championships">${c.ChampionshipsWon}</td>
                <td data-label="Win %">${c.WinPercentage}</td>
                <td data-label="Experience">${c.Experience}</td>
            </tr>
        `
        })

        // Show with animation
        container.style.display = 'block'
        container.style.animation = 'fadeIn 0.6s ease'
      }
    </script>
  </body>
</html>
